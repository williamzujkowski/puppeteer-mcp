# Docker-specific Environment Configuration
# This file contains Docker-specific overrides for the application

# ==================== Application ====================
NODE_ENV=development
PORT=8443
HOST=0.0.0.0
GRPC_PORT=50051
GRPC_HOST=0.0.0.0

# ==================== Security ====================
JWT_SECRET=docker-dev-jwt-secret-change-in-production-min-32-chars
SESSION_SECRET=docker-dev-session-secret-change-in-production-32+
TLS_ENABLED=false
CSRF_ENABLED=true

# ==================== Database ====================
DATABASE_URL=postgresql://mcp:mcp-password@postgres:5432/puppeteer_mcp
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_SSL=false

# ==================== Redis ====================
REDIS_URL=redis://:redis-dev-password@redis:6379
REDIS_TLS=false
REDIS_KEY_PREFIX=mcp:dev:
REDIS_CONNECTION_TIMEOUT=5000
REDIS_COMMAND_TIMEOUT=5000

# ==================== Logging ====================
LOG_LEVEL=debug
LOG_FORMAT=pretty
AUDIT_LOG_ENABLED=true
AUDIT_LOG_PATH=/app/logs/audit

# ==================== Puppeteer ====================
PUPPETEER_HEADLESS=true
PUPPETEER_EXECUTABLE_PATH=/usr/bin/chromium-browser
BROWSER_POOL_MAX_SIZE=3
BROWSER_POOL_MIN_SIZE=1
BROWSER_IDLE_TIMEOUT=300000
BROWSER_LAUNCH_TIMEOUT=30000
BROWSER_NAVIGATION_TIMEOUT=30000

# ==================== Rate Limiting ====================
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# ==================== CORS ====================
CORS_ORIGIN=http://localhost:3000,http://localhost:8080
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# ==================== WebSocket ====================
WS_PATH=/ws
WS_HEARTBEAT_INTERVAL=30000
WS_CONNECTION_TIMEOUT=60000
WS_MAX_PAYLOAD=104857600

# ==================== Session Management ====================
SESSION_TTL=86400000
SESSION_EXTEND_ON_ACCESS=true
SESSION_MAX_CONCURRENT=5

# ==================== Telemetry ====================
TELEMETRY_ENABLED=true
TELEMETRY_SERVICE_NAME=puppeteer-mcp
TELEMETRY_SERVICE_VERSION=1.0.14
TELEMETRY_ENVIRONMENT=docker-dev

# Tracing
TELEMETRY_TRACE_ENABLED=true
TELEMETRY_TRACE_EXPORTER=jaeger
TELEMETRY_TRACE_JAEGER_ENDPOINT=http://jaeger:14268/api/traces
TELEMETRY_TRACE_SAMPLING_RATE=1.0
TELEMETRY_SAMPLING_STRATEGY=always_on

# Metrics
TELEMETRY_METRICS_ENABLED=true
TELEMETRY_METRICS_EXPORTER=prometheus
TELEMETRY_METRICS_PROMETHEUS_PORT=9464
TELEMETRY_METRICS_INTERVAL=10000

# Debug
TELEMETRY_DEBUG=true
TELEMETRY_LOG_LEVEL=debug

# ==================== Performance ====================
NODE_OPTIONS=--enable-source-maps --max-old-space-size=512
UV_THREADPOOL_SIZE=8

# ==================== Docker Specific ====================
RUNNING_IN_DOCKER=true
DOCKER_HOST_IP=host.docker.internal

# ==================== Feature Flags ====================
FEATURE_PROXY_SUPPORT=true
FEATURE_MULTI_TENANT=false
FEATURE_ADVANCED_METRICS=true
FEATURE_BROWSER_RECORDING=false