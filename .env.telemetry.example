# OpenTelemetry Configuration Example
# Copy this file to .env and adjust values as needed

# ===== Basic Configuration =====
# Enable/disable telemetry (default: true)
TELEMETRY_ENABLED=true

# Service identification
TELEMETRY_SERVICE_NAME=puppeteer-mcp
TELEMETRY_SERVICE_VERSION=1.0.14
TELEMETRY_ENVIRONMENT=production

# ===== Tracing Configuration =====
# Enable distributed tracing (default: true)
TELEMETRY_TRACE_ENABLED=true

# Sampling rate (0.0-1.0, default: 0.1 = 10%)
# - 0.0 = no traces
# - 0.1 = 10% of traces
# - 1.0 = all traces
TELEMETRY_TRACE_SAMPLING_RATE=0.1

# Trace exporter: otlp, jaeger, zipkin, console, none
TELEMETRY_TRACE_EXPORTER=otlp

# OTLP (OpenTelemetry Protocol) - Recommended
TELEMETRY_TRACE_OTLP_ENDPOINT=http://localhost:4318/v1/traces

# Jaeger - Alternative
# TELEMETRY_TRACE_EXPORTER=jaeger
# TELEMETRY_TRACE_JAEGER_ENDPOINT=http://localhost:14268/api/traces

# Zipkin - Alternative
# TELEMETRY_TRACE_EXPORTER=zipkin
# TELEMETRY_TRACE_ZIPKIN_ENDPOINT=http://localhost:9411/api/v2/spans

# ===== Metrics Configuration =====
# Enable metrics collection (default: true)
TELEMETRY_METRICS_ENABLED=true

# Metrics export interval in ms (default: 60000 = 1 minute)
TELEMETRY_METRICS_INTERVAL=60000

# Metrics exporter: otlp, prometheus, console, none
TELEMETRY_METRICS_EXPORTER=otlp

# OTLP metrics endpoint
TELEMETRY_METRICS_OTLP_ENDPOINT=http://localhost:4318/v1/metrics

# Prometheus - Alternative
# TELEMETRY_METRICS_EXPORTER=prometheus
# TELEMETRY_METRICS_PROMETHEUS_PORT=9464

# ===== Sampling Strategies =====
# Strategy: always_on, always_off, trace_id_ratio, parent_based, adaptive
TELEMETRY_SAMPLING_STRATEGY=parent_based

# Adaptive sampling target (traces per second)
# TELEMETRY_SAMPLING_ADAPTIVE_TARGET_RATE=100

# ===== Context Propagation =====
# Propagators (comma-separated): tracecontext, baggage, b3, b3multi, jaeger
TELEMETRY_PROPAGATORS=tracecontext,baggage

# Baggage max size in bytes
TELEMETRY_BAGGAGE_MAX_SIZE=8192

# ===== Resource Detection =====
# Auto-detect environment resources (default: true)
TELEMETRY_RESOURCE_DETECTION=true

# Additional resource attributes (JSON format)
# TELEMETRY_RESOURCE_ATTRIBUTES={"team":"platform","region":"us-east-1"}

# ===== Export Configuration =====
# Export timeout in ms (default: 30000 = 30 seconds)
TELEMETRY_EXPORT_TIMEOUT=30000

# Maximum queue size for buffered exports
TELEMETRY_EXPORT_MAX_QUEUE_SIZE=2048

# Maximum batch size for exports
TELEMETRY_EXPORT_MAX_BATCH_SIZE=512

# Batch delay in ms before sending
TELEMETRY_EXPORT_BATCH_DELAY=5000

# ===== Instrumentation Control =====
# Enable/disable specific instrumentations
TELEMETRY_INSTRUMENT_HTTP=true
TELEMETRY_INSTRUMENT_EXPRESS=true
TELEMETRY_INSTRUMENT_GRPC=true
TELEMETRY_INSTRUMENT_REDIS=true
TELEMETRY_INSTRUMENT_WS=true
TELEMETRY_INSTRUMENT_PUPPETEER=true

# ===== Debug Configuration =====
# Enable debug mode for troubleshooting
TELEMETRY_DEBUG=false

# Telemetry log level: error, warn, info, debug, verbose
TELEMETRY_LOG_LEVEL=error

# ===== Example Configurations =====

# === Production with Jaeger ===
# TELEMETRY_ENABLED=true
# TELEMETRY_TRACE_EXPORTER=jaeger
# TELEMETRY_TRACE_JAEGER_ENDPOINT=http://jaeger-collector:14268/api/traces
# TELEMETRY_TRACE_SAMPLING_RATE=0.01
# TELEMETRY_SAMPLING_STRATEGY=adaptive
# TELEMETRY_SAMPLING_ADAPTIVE_TARGET_RATE=100

# === Development with Console ===
# TELEMETRY_ENABLED=true
# TELEMETRY_TRACE_EXPORTER=console
# TELEMETRY_METRICS_EXPORTER=console
# TELEMETRY_TRACE_SAMPLING_RATE=1.0
# TELEMETRY_DEBUG=true
# TELEMETRY_LOG_LEVEL=debug

# === Kubernetes with OTLP Collector ===
# TELEMETRY_ENABLED=true
# TELEMETRY_TRACE_EXPORTER=otlp
# TELEMETRY_TRACE_OTLP_ENDPOINT=http://otel-collector.observability:4318/v1/traces
# TELEMETRY_METRICS_EXPORTER=otlp
# TELEMETRY_METRICS_OTLP_ENDPOINT=http://otel-collector.observability:4318/v1/metrics
# TELEMETRY_SAMPLING_STRATEGY=parent_based
# TELEMETRY_TRACE_SAMPLING_RATE=0.05

# === High-Performance Production ===
# TELEMETRY_ENABLED=true
# TELEMETRY_TRACE_SAMPLING_RATE=0.001
# TELEMETRY_SAMPLING_STRATEGY=trace_id_ratio
# TELEMETRY_EXPORT_MAX_QUEUE_SIZE=5000
# TELEMETRY_EXPORT_MAX_BATCH_SIZE=1000
# TELEMETRY_INSTRUMENT_HTTP=false  # Reduce overhead
# TELEMETRY_INSTRUMENT_EXPRESS=false