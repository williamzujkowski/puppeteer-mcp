# puppeteer-mcp Environment Configuration Template
# Copy this file to .env and customize for your environment
# DO NOT commit .env files to version control

# ==================== Application ====================
# Environment: development, staging, production
NODE_ENV=development

# Server ports
PORT=8443
HOST=0.0.0.0
GRPC_PORT=50051
GRPC_HOST=0.0.0.0

# ==================== Security ====================
# TLS Configuration
TLS_ENABLED=true
TLS_CERT_PATH=./certs/cert.pem
TLS_KEY_PATH=./certs/key.pem

# Secrets (minimum 32 characters, use strong random values in production)
JWT_SECRET=your-jwt-secret-here-change-in-production-min-32-characters
SESSION_SECRET=your-session-secret-here-change-in-production-min-32-chars

# CSRF Protection
CSRF_ENABLED=true

# API Key for service authentication
API_KEY_SALT=your-api-key-salt-here

# ==================== Database ====================
# PostgreSQL connection string
DATABASE_URL=postgresql://user:password@localhost:5432/puppeteer_mcp
DATABASE_SSL=require
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# ==================== Redis ====================
# Redis connection
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your-redis-password
REDIS_TLS=true
REDIS_KEY_PREFIX=mcp:
REDIS_CONNECTION_TIMEOUT=5000
REDIS_COMMAND_TIMEOUT=5000

# ==================== Logging ====================
# Log levels: error, warn, info, debug, trace
LOG_LEVEL=info

# Log formats: json, pretty
LOG_FORMAT=json

# Audit logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_PATH=./logs/audit
AUDIT_LOG_MAX_FILES=30
AUDIT_LOG_MAX_SIZE=100M

# ==================== Rate Limiting ====================
# Window in milliseconds
RATE_LIMIT_WINDOW=900000  # 15 minutes

# Maximum requests per window
RATE_LIMIT_MAX_REQUESTS=100

# Rate limit configuration per endpoint
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# ==================== CORS ====================
# Allowed origins (comma-separated)
CORS_ORIGIN=https://example.com,https://app.example.com
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# ==================== Puppeteer ====================
# Browser configuration
PUPPETEER_HEADLESS=true
PUPPETEER_EXECUTABLE_PATH=/usr/bin/chromium-browser

# Browser pool settings
BROWSER_POOL_MAX_SIZE=5
BROWSER_POOL_MIN_SIZE=1
BROWSER_IDLE_TIMEOUT=300000      # 5 minutes
BROWSER_LAUNCH_TIMEOUT=30000     # 30 seconds
BROWSER_NAVIGATION_TIMEOUT=30000 # 30 seconds

# Proxy configuration (optional)
# PROXY_URL=http://proxy.example.com:8080
# PROXY_USERNAME=proxy-user
# PROXY_PASSWORD=proxy-password

# ==================== WebSocket ====================
WS_PATH=/ws
WS_HEARTBEAT_INTERVAL=30000  # 30 seconds
WS_CONNECTION_TIMEOUT=60000   # 1 minute
WS_MAX_PAYLOAD=104857600      # 100MB

# ==================== Session Management ====================
SESSION_TTL=86400000          # 24 hours in milliseconds
SESSION_EXTEND_ON_ACCESS=true
SESSION_MAX_CONCURRENT=5      # Max concurrent sessions per user

# ==================== API Configuration ====================
API_TIMEOUT=30000             # 30 seconds
API_MAX_REQUEST_SIZE=10mb
API_COMPRESSION_ENABLED=true

# ==================== Telemetry (Optional) ====================
# See .env.telemetry.example for detailed telemetry configuration
TELEMETRY_ENABLED=false
TELEMETRY_SERVICE_NAME=puppeteer-mcp
TELEMETRY_ENVIRONMENT=production

# ==================== Performance ====================
# Node.js options
NODE_OPTIONS=--enable-source-maps --max-old-space-size=2048

# Thread pool size for libuv
UV_THREADPOOL_SIZE=4

# ==================== Feature Flags ====================
# Enable/disable features
FEATURE_PROXY_SUPPORT=true
FEATURE_MULTI_TENANT=false
FEATURE_ADVANCED_METRICS=true
FEATURE_BROWSER_RECORDING=false

# ==================== External Services ====================
# Webhook endpoints for notifications
# WEBHOOK_URL=https://api.example.com/webhooks/puppeteer-mcp
# WEBHOOK_SECRET=webhook-secret-key

# ==================== Development Only ====================
# These should only be set in development
# DEV_TOOLS_ENABLED=false
# DEV_ADMIN_EMAIL=admin@example.com
